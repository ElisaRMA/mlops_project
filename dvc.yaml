stages:
  data:
    cmd: make data
    deps:
      - src/data/make_dataset.py
    outs:
      - data/raw

  prepare:
    cmd: make prepare
    deps:
      - data/raw/train.csv
      - src/prepare/prepare_data.py
    params:
      - dataset.target
      - prepare.random_state
      - prepare.split
      - prepare.missing.num_cols
      - prepare.missing.cat_cols
      - prepare.drop.cols
    outs:
      - data/prepared
  featurize:
    cmd: make featurize
    deps:
      - data/prepared/train.csv
      - data/prepared/test.csv
      - src/features/build_features.py
    params:
      - dataset.target
      - featurize.ohe_cols
    outs:
      - data/processed
  train:
    cmd: make train
    deps:
      - data/processed/train.joblib
      - data/processed/test.joblib
      - src/models/train_model.py
    params:
      - train.seed
      - train.n_estimators
      - train.min_split
    outs:
      - model.joblib
